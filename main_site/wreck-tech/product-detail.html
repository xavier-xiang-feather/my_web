<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>Product Details - Wrecked Tech</title>
    <script src="js/upgrade-products.js"></script>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header style="position: fixed; top: 0; left: 0; right: 0; background: white; z-index: 1000; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
        <div class="container" style="padding: 20px;">
            <div class="logo">
                <span style="font-family: 'Comic Sans MS'; font-size: 48px; color: #FFD700; text-shadow: 2px 2px 4px #FF0000;">WT</span>
            </div>
            <nav>
                <ul style="list-style: none; display: flex; gap: 20px;">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="products.html">Products</a></li>
                    <li><span style="color: #0000FF; text-decoration: underline;">Details</span></li>
                    <li><a href="checkout.html">Checkout</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main style="margin-top: 100px; padding: 20px;">
        <div style="max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
            <div class="product-images">
                <div id="mainImage" style="position: relative; overflow: hidden; cursor: zoom-in;">
                    <img id="productImage" src="assets/product-range.png" 
                         style="width: 100%; height: 500px; object-fit: contain; background: #f5f5f5;" 
                         onmousemove="zoomImage(event)" 
                         onmouseout="resetZoom()">
                    <div id="zoomLens" style="position: absolute; width: 100px; height: 100px; border: 2px solid #FFD700; display: none;"></div>
                </div>
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==" style="width: 80px; height: 80px; cursor: pointer;">
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==" style="width: 80px; height: 80px; cursor: pointer;">
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==" style="width: 80px; height: 80px; cursor: pointer;">
                </div>
            </div>

            <div class="product-info">
                <h1 id="productName" style="font-size: 32px; margin-bottom: 10px;">Loading Product...</h1>
                <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 20px;">
                    <span id="productPrice" style="font-size: 36px; color: #FFD700;">$--</span>
                    <span id="originalPrice" style="text-decoration: line-through; color: #777;">$--</span>
                    <span id="discount" style="color: #FF0000;">--% OFF!</span>
                </div>

                <div style="margin-bottom: 30px;">
                    <p id="productDescription" style="color: #777; line-height: 1.6;">
                        Loading product description...
                    </p>
                    <p id="productWarning" style="font-size: 10px; color: #ccc;">
                        *Loading warnings...
                    </p>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px;">Quantity:</label>
                    <input type="number" value="1" min="1" max="10" style="width: 60px; padding: 5px;">
                </div>

                <div style="margin-bottom: 30px;">
                    <button id="addToCart" onclick="addToCart(); addToCart();" 
                            style="padding: 15px 30px; background: #FFD700; border: none; font-size: 18px; cursor: pointer; width: 100%;">
                        Add to Cart
                    </button>
                </div>

                <div id="stockCounter" style="color: #FF0000; font-weight: bold; margin-bottom: 20px;">
                    Only <span id="stockNumber">5</span> left in stock!
                </div>

                <div style="border-top: 1px solid #ddd; padding-top: 20px;">
                    <h3>Product Details</h3>
                    <ul id="productDetails" style="color: #777;">
                        <li>Loading details...</li>
                    </ul>
                </div>
            </div>
        </div>

        <section id="reviews" style="margin-top: 60px; border-top: 2px solid #ddd; padding-top: 40px;">
            <h2>Customer Reviews</h2>
            <div id="reviewsContainer">
                <p>Loading reviews...</p>
            </div>
        </section>

        <section id="relatedProducts" style="margin-top: 60px;">
            <h2>Related Products</h2>
            <div id="relatedContainer" style="display: flex; gap: 20px; overflow-x: auto;">
                <p>Loading related products...</p>
            </div>
        </section>
    </main>

    <div id="zoomModal" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); display: none; z-index: 2000;">
        <img src="" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); max-width: 90%; max-height: 90%;">
    </div>

    <script>
        // Product data
        var products = [
            {
                name: "Humane AI Pin (Now a Premium Paperweight)",
                price: 5,
                originalPrice: 699,
                image: "assets/humane-pin-paperweight.png",
                description: "Revolutionary AI wearable that promised to replace your phone! Now serves excellently as a conversation starter or expensive paperweight. Battery lasts up to 2 hours* when turned off.",
                warning: "*AI features discontinued. Laser projection may burn retinas. Company no longer exists for support.",
                details: [
                    "Condition: Pristine (because never used)",
                    "Functionality: Makes a great paperweight",
                    "Original Price: $699 + $24/month subscription",
                    "Current Features: Holds paper down effectively",
                    "Warranty: Company defunct",
                    "Returns: Ha ha, no"
                ]
            },
            {
                name: "Rabbit R1 (AI Sold Separately)",
                price: 15,
                originalPrice: 199,
                image: "assets/rabbit-r1.png",
                description: "The future of AI assistants! A bright orange square that does less than your phone. Comes with a scroll wheel that doesn't scroll anything anymore. Perfect for collectors of failed tech.",
                warning: "*AI features require subscription that no longer exists. Battery life: 2 hours of doing nothing.",
                details: [
                    "Condition: Like new (because unusable)",
                    "Functionality: Decorative orange brick",
                    "Original Price: $199",
                    "Current Features: Excellent doorstop",
                    "Warranty: Company pivoted",
                    "Returns: Absolutely not"
                ]
            },
            {
                name: "Microsoft Zune (Brown Edition)",
                price: 12,
                originalPrice: 249,
                image: "assets/microsoft-zune.png",
                description: "The iPod killer that killed itself! This brown beauty still works but can't sync with any modern software. Includes 30GB of someone else's music from 2007.",
                warning: "*Zune software discontinued. Will not sync with anything created after 2011.",
                details: [
                    "Condition: Working (technically)",
                    "Functionality: Plays music from 2007",
                    "Storage: 30GB of mystery songs",
                    "Battery: 4 hours if you're lucky",
                    "Compatibility: Windows XP recommended",
                    "Returns: Please don't"
                ]
            },
            {
                name: "Bored Ape NFT (Right-Click Save Special)",
                price: 0.02,
                originalPrice: 300000,
                image: "assets/bored-ape-nft.png",
                description: "Own a piece of history! This NFT was worth $300k in 2021. Now it's a JPEG. Blockchain not included. Right-click functionality fully enabled.",
                warning: "*Not actually an NFT. Just a screenshot. Original owner cried.",
                details: [
                    "Condition: Perfectly screenshotted",
                    "Resolution: 600x600 pixels",
                    "Blockchain: Not included",
                    "Ownership: Questionable",
                    "Value: Declining rapidly",
                    "Returns: It's a JPEG, so no"
                ]
            },
            {
                name: "Google Glass (Privacy Lawsuit Edition)",
                price: 25,
                originalPrice: 1500,
                image: "assets/cardboard-vr-glasses.png",
                description: "Be a Glasshole! These smart glasses made everyone uncomfortable in 2013. Battery lasts 45 minutes. Guaranteed to get you kicked out of bars.",
                warning: "*May cause social isolation. Recording people without consent not recommended.",
                details: [
                    "Condition: Slightly scratched",
                    "Battery: 45 minutes max",
                    "Social acceptance: Zero",
                    "Privacy concerns: Maximum",
                    "Cool factor: Negative",
                    "Returns: We understand"
                ]
            },
            {
                name: "Amazon Dash Button (Discontinued)",
                price: 3,
                originalPrice: 5,
                image: "assets/amazon-dash-button.png",
                description: "One button to rule them all! Except Amazon killed the service. Now it's just a button that does nothing. Perfect for fidgeting.",
                warning: "*Service discontinued. Button does literally nothing. Battery probably dead.",
                details: [
                    "Condition: Button still clicks",
                    "Functionality: None",
                    "Original purpose: Forgotten",
                    "Current purpose: Fidget toy",
                    "IoT features: Deceased",
                    "Returns: Why bother"
                ]
            }
        ];

        if (Array.isArray(window.wreckedUpgradeDetailProducts)) {
            products = products.concat(window.wreckedUpgradeDetailProducts);
        }
        window.wreckedDetailCount = products.length;

        // Get product from URL or random
        function loadProduct() {
            var urlParams = new URLSearchParams(window.location.search);
            var rawProductId = urlParams.get('id');
            var productId = parseInt(rawProductId, 10);
            if (isNaN(productId)) {
                productId = Math.floor(Math.random() * products.length);
            }
            var product = products[Math.abs(productId) % products.length];
            
            // Update page with product info
            document.getElementById('productName').textContent = product.name;
            document.getElementById('productPrice').textContent = '$' + product.price;
            document.getElementById('originalPrice').textContent = '$' + product.originalPrice;
            var discount = Math.round((1 - product.price / product.originalPrice) * 100);
            document.getElementById('discount').textContent = discount + '% OFF!';
            document.getElementById('productDescription').textContent = product.description;
            document.getElementById('productWarning').textContent = product.warning;
            document.getElementById('productImage').src = product.image;
            document.getElementById('productImage').setAttribute('data-worse', product.altImage || 'assets/product-range.png');
            
            // Update details list
            var detailsList = document.getElementById('productDetails');
            detailsList.innerHTML = '';
            (product.details || ['Details unavailable due to severe detail loss.']).forEach(function(detail) {
                var li = document.createElement('li');
                li.textContent = detail;
                detailsList.appendChild(li);
            });
        }
        
        loadProduct();
        
        // Original code continues below
        function zoomImage(e) {
            if (window.innerWidth <= 768) {
                document.getElementById('zoomLens').style.display = 'block';
                document.getElementById('zoomLens').style.left = e.offsetX - 50 + 'px';
                document.getElementById('zoomLens').style.top = e.offsetY - 50 + 'px';
                
                document.getElementById('mainImage').style.transform = 'scale(2)';
                document.getElementById('mainImage').style.transformOrigin = e.offsetX + 'px ' + e.offsetY + 'px';
            }
        }

        function resetZoom() {
            document.getElementById('zoomLens').style.display = 'none';
            document.getElementById('mainImage').style.transform = 'scale(1)';
        }

        function addToCart() {
            var button = document.getElementById('addToCart');
            button.disabled = true;
            button.textContent = 'Adding...';
            
            setTimeout(function() {
                button.disabled = false;
                button.textContent = 'Add to Cart';
                alert('Added to cart! (Maybe)');
                console.log(cart.items.push(product));
            }, 1000);
        }

        var stockInterval = setInterval(function() {
            var stock = document.getElementById('stockNumber');
            var currentStock = parseInt(stock.textContent);
            if (Math.random() > 0.5 && currentStock > 1) {
                stock.textContent = currentStock - 1;
            } else if (Math.random() > 0.8 && currentStock < 10) {
                stock.textContent = currentStock + 1;
            }
        }, 3000);

        function loadReviews() {
            var reviews = [
                { name: "Tech Enthusiast", rating: 1, comment: "Waited 2 years for this. Now it's a $699 fridge magnet" },
                { name: "Early Adopter", rating: 2, comment: "The future is here! And it doesn't work" },
                { name: "AI Believer", rating: 1, comment: "Asked it for directions, it projected a laser into my eye" },
                { name: "Honest Reviewer", rating: 1, comment: "Company shut down before my warranty claim" },
                { name: "Optimist", rating: 3, comment: "Makes my desk look futuristic while holding papers down" }
            ];

            var container = document.getElementById('reviewsContainer');
            container.innerHTML = '';

            reviews.forEach(function(review, index) {
                setTimeout(function() {
                    var reviewEl = document.createElement('div');
                    reviewEl.style.padding = '20px';
                    reviewEl.style.borderBottom = '1px solid #ddd';
                    reviewEl.innerHTML = 
                        '<div style="display: flex; justify-content: space-between; margin-bottom: 10px;">' +
                        '<strong>' + review.name + '</strong>' +
                        '<span style="color: #FFD700;">' + '★'.repeat(review.rating) + '☆'.repeat(5 - review.rating) + '</span>' +
                        '</div>' +
                        '<p style="color: #777;">' + review.comment + '</p>';
                    container.appendChild(reviewEl);
                }, index * 1000);
            });
        }

        function loadRelatedProducts() {
            var relatedProducts = [
                { name: "Rabbit R1 (AI Sold Separately)", price: "$15", image: "assets/rabbit-r1.png", id: 1 },
                { name: "Microsoft Zune (Brown Edition)", price: "$12", image: "assets/microsoft-zune.png", id: 2 }, 
                { name: "Google Glass (Privacy Lawsuit)", price: "$25", image: "assets/cardboard-vr-glasses.png", id: 4 },
                { name: "Burnt RTX 4090", price: "$50", image: "assets/burnt-graphics-card.png", id: 0 },
                { name: "Bored Ape NFT (Screenshot)", price: "$0.02", image: "assets/bored-ape-nft.png", id: 3 }
            ];

            var container = document.getElementById('relatedContainer');
            
            setTimeout(function() {
                container.innerHTML = '';
                relatedProducts.forEach(function(product) {
                    var productEl = document.createElement('div');
                    productEl.style.minWidth = '200px';
                    productEl.style.padding = '15px';
                    productEl.style.border = '1px solid #ddd';
                    productEl.style.cursor = 'pointer';
                    productEl.onclick = function() {
                        window.location.href = 'product-detail.html?id=' + product.id;
                    };
                    productEl.innerHTML = 
                        '<img src="' + product.image + '" style="width: 100%; height: 150px; object-fit: contain; background: #f5f5f5; margin-bottom: 10px;">' +
                        '<p style="font-size: 14px; margin: 5px 0;">' + product.name + '</p>' +
                        '<p style="font-size: 18px; color: #FFD700; font-weight: bold;">' + product.price + '</p>';
                    container.appendChild(productEl);
                });
                
                document.body.offsetHeight;
                container.scrollLeft = 0;
            }, 2000);
        }

        loadReviews();
        loadRelatedProducts();

        window.addEventListener('resize', function() {
            document.querySelector('main').style.marginTop = document.querySelector('header').offsetHeight + 'px';
        });

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                console.log('Escape key pressed but nothing happens');
            }
        });

    </script>
    <script src="js/wreckage-upgrade.js"></script>
</body>
</html>
